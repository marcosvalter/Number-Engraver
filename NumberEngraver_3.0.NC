O0100(NUMBER ENGRAVER)
(AUTHOR: MARCOS VALTER)
(DATE: 23-12-2021)

(USAGE: G65 P0100 X Y Z W F E Q R S V H)
(X - X AXIS POSITION)
(Y - Y AXIS POSITION)
(Z - Z AXIS FEED PLANE)
(W - Z AXIS RETRACT)
(F - FEED PLANE X,Y)
(E - FEED Z AXIS)
(Q - NUMBER)
(R - NUMBER LENGH)
(S - SCALE)
(V - SPACING)
(H - HELP CONTENTS)

(USEFULL FORMULAS)
(#3011 ACTUAL DATE VARIABLE YYYYMMDD)
(#3012 ACTUAL TIME VARIABLE HHMMSS)

(DAY DD #3011-[FIX[#3011/100]*100])
(MONTH MM FIX[#3011/100]-[FIX[#3011/10000]*100])
(YEAR YYYY FIX[#3011/10000])
(YEAR YY FIX[#3011/10000]-[FIX[#3011/1000000]*100])

(SECONDS SS #3012-[FIX[#3012/100]*100])
(MINUTES MM FIX[#3012/100]-[FIX[#3012/10000]*100])
(HOURS HH FIX[#3012/10000]-[FIX[#3012/1000000]*100])

(PROGRAM)

(CALCULATIONS)
#19=#19/100

(ARGUMENT VALIDATION)
N10
IF[#11NE#0]GOTO30(HELP)
IF[#24EQ#0]GOTO20(X POS)
IF[#25EQ#0]GOTO21(Y POS)
IF[#26EQ#0]GOTO22(Z FINAL)
IF[#23EQ#0]GOTO23(Z START)
IF[#9EQ#0]GOTO24(FEED XY)
IF[#8EQ#0]GOTO25(FEED Z)
IF[#19EQ#0]GOTO26(SCALE)
IF[#22EQ#0]GOTO27(SPACING)
IF[#17EQ#0]GOTO28(NUMBER)
IF[#18EQ#0]GOTO29(NUMBER LENGH)

GOTO100 

N20
#3000=1(X POS FAULT - TRY G65 H1 FOR HELP)
N21
#3000=1(Y POS FAULT - TRY G65 H1 FOR HELP)
N22
#3000=1(Z POS FAULT - TRY G65 H1 FOR HELP)
N23
#3000=1(Z START POS FAULT - TRY G65 H1 FOR HELP)
N24
#3000=1(FEEDRATE XY FAULT - TRY G65 H1 FOR HELP)
N25
#3000=1(FEEDRATE Z FAULT - TRY G65 H1 FOR HELP)
N26
#3000=1(SCALE FAULT - TRY G65 H1 FOR HELP)
N27
#3000=1(SPACING FAULT - TRY G65 H1 FOR HELP)
N28
#3000=1(NUMBER FAULT - TRY G65 H1 FOR HELP)
N29
#3000=1(NUMBER LENGH FAULT - TRY G65 H1 FOR HELP)

(HELP CONTENTS)
N30
#3006=1(USAGE: G65 P0100 X Y Z W F E S V H)
#3006=1(X - X AXIS POSITION)
#3006=1(Y - Y AXIS POSITION)
#3006=1(Z - Z AXIS FEED PLANE)
#3006=1(W - Z AXIS RETRACT)
#3006=1(F - FEED PLANE X,Y)
#3006=1(E - FEED Z AXIS)
#3006=1(S - SCALE)
#3006=1(V - SPACING)
#3006=1(Q - NUMBER)
#3006=1(R - NUMBER LENGH)
#3006=1(H - HELP CONTENTS)
#3000=1(NOTHING DONE...)
 
N100

(*** NUMBER ENGRAVING ALG ***)
N150
IF[#18EQ0]GOTO190(ENGRAVING LOOP)
#1=[#18](lENGHT COUNTER)
#2=1(POWER COUNTER)
N160
IF[#1EQ1]GOTO170(POWER CALCULATION)
#2=#2*10
#1=#1-1
GOTO160
N170
#4=180
GOTO[1000+FIX[#17/#2]*10](WRITE NUMBER)
N180(RETURN LINE)
#18=#18-1(NUM LENGHT UPDATE)
#17=#17-[FIX[#17/#2]*#2](NUM UPDATE)
GOTO150
N190

M99

(*** NUMBERS ***)

(DIGIT 0)
N1000
G00 G90 X[[#19*52.637]+#24] Y[[#19*83.688]+#25]
G00 G43 Z#23
G01 Z#26 F#8
G02 X[[#19*58.571]+#24] Y[[#19*50]+#25] I-[#19*92.652] J-[#19*33.688] F#9
X[[#19*52.637]+#24] Y[[#19*16.312]+#25] I-[#19*98.586] J0.
X[[#19*29.286]+#24] Y-[[#19*0.162]-#25] I-[#19*23.351] J[#19*8.313]
X[[#19*5.934]+#24] Y[[#19*16.312]+#25] I0. J[#19*24.787]
X#24 Y[[#19*50]+#25] I[#19*92.652] J[#19*33.688]
X[[#19*5.934]+#24] Y[[#19*83.688]+#25] I[#19*98.586] J0.
X[[#19*29.286]+#24] Y[[#19*100.163]+#25] I[#19*23.352] J-[#19*8.313]
X[[#19*52.637]+#24] Y[[#19*83.688]+#25] I0. J-[#19*24.788]
G00 Z#23.

IF[#22LT0]GOTO1005
#24=#24+[#22+[#19*58.5]]
GOTO1006
N1005
#24=#24-[#19*#22]
N1006
GOTO#4

(DIGIT 1)
N1010
G00 G90 X#24 Y[[#19*85.714]+#25]
G43 Z#23
G01 Z#26 F#8
X[[#19*14.286]+#24] Y[[#19*100]+#25] F#9
Y#25
G0 Z#23
X[[#19*28.571]+#24]
G01 Z#26 F#8
X#24 F#9
G00 Z#23

IF[#22LT0]GOTO1015
#24=#24+[#22+[#19*28.5]]
GOTO1016
N1015
#24=#24-[#19*#22]
N1016
GOTO#4

(DIGIT 2)
N1020 
G00 G90 X[[#19*2.143]+#24] Y[[#19*85.714]+#25] 
G43 Z#23
G01 Z#26 F#8
G02 X[[#19*26.886]+#24] Y[[#19*100]+#25] I[#19*24.743] J-[#19*14.2885] F#9.
G01 X[[#19*29.105]+#24]
G02 X[[#19*57.647]+#24] Y[[#19*72.713]+#25] I0. J-[#19*28.571]
X[[#19*50.262]+#24] Y[[#19*54.796]+#25] I-[#19*28.542] J[#19*1.284]
X[[#19*24.579]+#24] Y[[#19*35.623]+#25] I-[#19*154.447] J[#19*180.104]
G03 X#24 Y#25 I[#19*23.202] J-[#19*42.3]
G01 X[[#19*59.786]+#24]
G00 Z#23 

IF[#22LT0]GOTO1025
#24=#24+[#22+[#19*60]]
GOTO1026
N1025
#24=#24-[#19*#22]
N1026
GOTO#4

(DIGIT 3)
N1030
G0 G90 X[[#19*1.429]+#24] Y[[#19*85.714]+#25]
G43 Z#23
G1 Z#26 F#8
G2 X[[#19*26.313]+#24] Y[[#19*100]+#25] I[#19*24.89] J-[#19*14.541] F#9
G1 X[[#19*30]+#24]
G2 X[[#19*50.768]+#24] Y[[#19*92.197]+#25] I0. J-[#19*31.538]
X[[#19*58.571]+#24] Y[[#19*75]+#25] I-[#19*15.047] J-[#19*17.197]
X[[#19*37.332]+#24] Y[[#19*50.092]+#25] I-[#19*25.223] J0.
G1 X[[#19*30.189]+#24]
X[[#19*37.332]+#24]
G2 X[[#19*60]+#24] Y[[#19*25]+#25] I-[#19*2.555] J-[#19*25.093]
X[[#19*52.197]+#24] Y[[#19*7.803]+#25] I-[#19*22.85] J0.
X[[#19*31.429]+#24] Y#25 I-[#19*20.768] J[#19*23.735]
G1 X[[#19*24.89]+#24]
G2 X#24 Y[[#19*14.286]+#25] I0. J[#19*28.827]
G0 Z#23

IF[#22LT0]GOTO1035
#24=#24+[#22+[#19*59]]
GOTO1036
N1035
#24=#24-[#19*#22]
N1036
GOTO#4

(DIGIT 4)
N1040
G00 G90 X[[#19*66.429]+#24] Y[[#19*23.571]+#25]
G43 Z#23
G01 Z#26 F#8
X#24 F#9
X[[#19*51.786]+#24] Y[[#19*100]+#25] 
Y#25
G0 Z#23

IF[#22LT0]GOTO1045
#24=#24+[#22+[#19*66]]
GOTO1046
N1045
#24=#24-[#19*#22]
N1046
GOTO#4
 
(DIGIT 5)
N1050
G00 G90 X[[#19*60.46]+#24] Y[[#19*100]+#25]
G43 Z#23
G01 Z#26 F#8
X#24 F#9
Y[[#19*55.713]+#25]
G02 X[[#19*26.838]+#24] Y[[#19*64.319]+#25] I[#19*26.838] J-[#19*37.546]
X[[#19*28.571]+#24] Y[[#19*64.286]+#25] I0. J-[#19*46.152]
X[[#19*45.483]+#24] Y[[#19*60.294]+#25] I0. J-[#19*37.815]
X[[#19*57.143]+#24] Y[[#19*50.]+#25] I-[#19*13.551] J-[#19*27.101]
X[[#19*62.622]+#24] Y[[#19*32.004]+#25] I-[#19*27.144] J-[#19*18.096]
X[[#19*58.324]+#24] Y[[#19*15.818]+#25] I-[#19*32.623] J0.
X[[#19*31.076]+#24] Y#25 I-[#19*27.257] J[#19*15.575]
G01 X[[#19*26.563]+#24] Y#25
X[[#19*26.554]+#24]
G2 X[[#19*5.601]+#24] Y[[#19*7.872]+#25] I0. J[#19*31.819]
X#24 Y[[#19*14.287]+#25] I[#19*20.953] J[#19*23.946]
G00 Z#23

IF[#22LT0]GOTO1055
#24=#24+[#22+[#19*62.8]]
GOTO1056
N1055
#24=#24-[#19*#22]
N1056
GOTO#4
 
(DIGIT 6)
N1060
G00 G90 X[[#19*59.986]+#24] Y[[#19*85.118]+#25]
G00 G43 Z#23
G01 Z#26 F#8
G03 X[[#19*34.053]+#24] Y[[#19*100.3]+#25] I-[#19*25.933] J-[#19*14.558] F#9
X[[#19*5.754]+#24] Y[[#19*79.702]+#25] I0. J-[#19*29.74]
X#24 Y[[#19*48.203]+#25] I[#19*83.334] J-[#19*31.5]
X[[#19*3.76]+#24] Y[[#19*22.594]+#25] I[#19*89.088] J0.
X[[#19*32.628]+#24] Y#25 I[#19*28.868] J[#19*7.145]
X[[#19*60.927]+#24] Y[[#19*20.597]+#25] I0. J[#19*29.739]
X[[#19*62.339]+#24] Y[[#19*29.648]+#25] I-[#19*28.302] J[#19*9.051]
X[[#19*32.625]+#24] Y[[#19*59.362]+#25] I-[#19*29.714] J0.
X[[#19*2.911]+#24] Y[[#19*29.648]+#25] I0. J-[#19*29.714]
X[[#19*3.76]+#24] Y[[#19*22.594]+#25] I[#19*29.714] J0.
G00 Z#23.

IF[#22LT0]GOTO1065
#24=#24+[#22+[#19*62.5]]
GOTO1066
N1065
#24=#24-[#19*#22]
N1066
GOTO#4

(DIGIT 7)
N1070
G00 G90 X#24 Y[[#19*100]+#25] 
G43 Z#23.
G01 Z#26 F#8
X[[#19*60]+#24] F#9
G03 X[[#19*30]+#24] Y#25 I[#19*151.723] J-[#19*100.017]
G00 Z#23

IF[#22LT0]GOTO1075
#24=#24+[#22+[#19*60]]
GOTO1076
N1075
#24=#24-[#19*#22]
N1076
GOTO#4

(DIGIT 8)
N1080
G00 G90 X[[#19*26.786]+#24] Y[[#19*53.571]+#25]
G43 Z#23
G01 Z#26 F#8
G02 X[[#19*3.571]+#24] Y[[#19*76.786]+#25] I0. J[#19*23.215] F#9
X[[#19*16.049]+#24] Y[[#19*97.368]+#25] I[#19*23.215] J0.
X[[#19*26.786]+#24] Y[[#19*100]+#25] I[#19*10.737] J-[#19*20.582]
G01 X[[#19*33.214]+#24]
G02 X[[#19*56.429]+#24] Y[[#19*76.786]+#25] I0. J-[#19*23.214]
X[[#19*33.214]+#24] Y[[#19*53.571]+#25] I-[#19*23.215] J0.
G01 X[[#19*26.786]+#24]
G03 X#24 Y[[#19*26.786]+#25] I0. J-[#19*26.785]
X[[#19*4.76]+#24] Y[[#19*11.543]+#25] I[#19*26.785] J0.
X[[#19*26.786]+#24] Y#25 I[#19*22.026] J[#19*15.243]
G01 X[[#19*33.214]+#24]
G03 X[[#19*60]+#24] Y[[#19*26.786]+#25] I0. J[#19*26.786]
X[[#19*33.214]+#24] Y[[#19*53.571]+#25] I-[#19*26.786] J0.
G00 Z#23

IF[#22LT0]GOTO1085
#24=#24+[#22+[#19*60.2]]
GOTO1086
N1085
#24=#24-[#19*#22]
N1086
GOTO#4

(DIGIT 9)
N1090
G00 G90 X[[#19*2.379]+#24] Y[[#19*15.182]+#25]
G43 Z#23
G01 Z#26 F#8
G03 X[[#19*28.312]+#24] Y#25 I[#19*25.933] J[#19*14.558] F#9
X[[#19*56.611]+#24] Y[[#19*20.598]+#25] I0. J[#19*29.74]
X[[#19*62.365]+#24] Y[[#19*52.097]+#25] I-[#19*83.333] J[#19*31.499]
X[[#19*58.605]+#24] Y[[#19*77.706]+#25] I-[#19*89.087] J0.
X[[#19*29.738]+#24] Y[[#19*100.299]+#25] I-[#19*28.867] J-[#19*7.145]
X#24 Y[[#19*70.561]+#25] I0. J-[#19*29.738]
X[[#19*0.87]+#24] Y[[#19*63.416]+#25] I[#19*29.738] J0
X[[#19*29.738]+#24] Y[[#19*40.822]+#25] I[#19*28.868] J[#19*7.145]
X[[#19*59.477]+#24] Y[[#19*70.561]+#25] I0. J[#19*29.739]
X[[#19*58.605]+#24] Y[[#19*77.706]+#25] I-[#19*29.739] J0.
G00 Z#23

IF[#22LT0]GOTO1095
#24=#24+[#22+[#19*62]]
GOTO1096
N1095
#24=#24-[#19*#22]
N1096
GOTO#4

N9999
M99
%

